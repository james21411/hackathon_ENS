<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AlgoScript Academy - Plateforme d'apprentissage algorithmique</title>
    
    <!-- Importation des polices depuis Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* ==========================================================================
           1. Configuration Globale & Thème
           ========================================================================== */
        :root {
            /* Palette de Couleurs */
            --primary: #6366F1;
            --secondary: #EC4899;
            --accent: #10B981;
            --neutral: #94A3B8;
            --background: #0F172A;
            --surface: #1E293B;
            --border-color: #334155;

            /* Couleurs des Blocs */
            --block-variable: #F59E0B;
            --block-condition: #8B5CF6;
            --block-loop: #06B6D4;
            --block-function: #EF4444;
            --block-data: #84CC16;

            /* Typographie */
            --font-sans: 'Inter', sans-serif;
            --font-display: 'Poppins', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
        }

        /* Réinitialisation de base et styles globaux */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }

        html, body {
            height: 100%;
            overflow: hidden;
        }

        body {
            background-color: var(--background);
            color: var(--neutral);
            font-family: var(--font-sans);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* ==========================================================================
           2. Animations
           ========================================================================== */
        @keyframes slideInDown { from { transform: translateY(-100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes slideInLeft { from { transform: translateX(-100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        @keyframes slideInRight { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        @keyframes slideInUp { from { transform: translateY(100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        @keyframes pulse { 0% { opacity: 0.8; } 50% { opacity: 1; } 100% { opacity: 0.8; } }

        /* ==========================================================================
           3. Structure Principale & Layout
           ========================================================================== */
        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            width: 100vw;
        }

        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* ==========================================================================
           4. Composants Spécifiques
           ========================================================================== */

        /* --- Header --- */
        .header {
            height: 4rem;
            background-color: var(--surface);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 1.5rem;
            flex-shrink: 0;
            animation: slideInDown 0.5s ease-out;
        }
        .header .logo { display: flex; align-items: center; gap: 0.5rem; }
        .header .logo .icon { color: var(--primary); }
        .header .logo h1 { font-family: var(--font-display); font-size: 1.25rem; color: white; }
        
        .header .progress-bar-container { flex: 1; max-width: 28rem; margin: 0 2rem; }
        .header .progress-bar-bg { width: 100%; height: 0.625rem; background-color: #334155; border-radius: 9999px; }
        .header .progress-bar-fill { height: 100%; width: 45%; background-image: linear-gradient(to right, var(--primary), var(--secondary)); border-radius: 9999px; animation: pulse 2s infinite; }
        .header .progress-text { font-size: 0.75rem; text-align: center; margin-top: 0.25rem; color: var(--neutral); }

        .header .profile-section { display: flex; align-items: center; gap: 1rem; }
        .header .profile-section .icon-button { background: none; border: none; padding: 0.5rem; border-radius: 50%; cursor: pointer; transition: background-color 0.2s; }
        .header .profile-section .icon-button:hover { background-color: rgba(255, 255, 255, 0.1); }
        .header .profile-section .icon { color: #CBD5E1; }
        .header .profile-section .avatar { width: 2.25rem; height: 2.25rem; border-radius: 50%; border: 2px solid var(--primary); }
        .header .profile-section .username { font-weight: 500; color: white; }

        /* --- Block Palette (Panneau de Gauche) --- */
        .block-palette {
            width: 300px;
            background-color: var(--surface);
            border-right: 1px solid var(--border-color);
            padding: 1rem;
            overflow-y: auto;
            animation: slideInLeft 0.5s ease-out;
        }
        .block-category { margin-bottom: 1.5rem; }
        .block-category-title {
            font-family: var(--font-display);
            font-weight: 700;
            font-size: 1.125rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .block-category .icon {
             width: 20px;
             height: 20px;
        }
        .draggable-block {
            padding: 0.75rem;
            border-radius: 0.375rem;
            font-family: var(--font-mono);
            font-size: 0.875rem;
            color: white;
            cursor: grab;
            margin-bottom: 0.5rem;
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
            overflow: hidden;
            border-left: 4px solid;
        }
        .draggable-block:after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(120deg, rgba(255,255,255,0.05), rgba(255,255,255,0));
            pointer-events: none;
        }
        .draggable-block:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        .draggable-block:active { 
            cursor: grabbing;
            transform: scale(0.98);
        }

        /* --- Zone Centrale --- */
        .center-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* --- Main Canvas --- */
        .main-canvas {
            flex: 1;
            background-color: var(--background);
            position: relative;
            animation: fadeIn 0.5s ease-out 0.2s;
            animation-fill-mode: backwards;
            overflow: auto;
        }
        .main-canvas .grid-background {
            position: absolute;
            inset: 0;
            z-index: 0;
            opacity: 0.15;
        }
        .main-canvas .canvas-content {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            text-align: center;
            color: #475569;
            z-index: 1;
            pointer-events: none;
        }
        .main-canvas .canvas-content h2 { 
            font-family: var(--font-display); 
            font-size: 1.875rem; 
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        .main-canvas .canvas-content p {
            max-width: 500px;
            line-height: 1.6;
        }

        /* --- Execution Console (Pied de page) --- */
        .execution-console {
            height: 200px;
            background-color: var(--surface);
            border-top: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
            animation: slideInUp 0.5s ease-out;
        }
        .console-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.5rem;
            border-bottom: 1px solid var(--border-color);
            flex-shrink: 0;
        }
        .console-header .title { 
            font-family: var(--font-display); 
            color: white; 
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .console-header .controls { display: flex; gap: 0.5rem; }
        .console-header .control-button { 
            background: none; 
            border: none; 
            padding: 0.5rem; 
            border-radius: 0.25rem; 
            transition: background-color 0.2s; 
            cursor: pointer; 
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .console-header .play { color: #34D399; } .console-header .play:hover { background-color: rgba(16, 185, 129, 0.2); }
        .console-header .pause { color: #FBBF24; } .console-header .pause:hover { background-color: rgba(251, 191, 36, 0.2); }
        .console-header .stop { color: #F87171; } .console-header .stop:hover { background-color: rgba(248, 113, 113, 0.2); }
        .console-header .clear { color: #9CA3AF; } .console-header .clear:hover { background-color: rgba(156, 163, 175, 0.2); }
        .console-output {
            flex: 1;
            padding: 0.75rem;
            font-family: var(--font-mono);
            font-size: 0.875rem;
            overflow-y: auto;
        }
        .console-output p { margin-bottom: 0.25rem; }
        .console-output .log-variable { color: var(--block-variable); }
        .console-output .log-error { color: #F87171; }

        /* --- Side Panel (Panneau de Droite) --- */
        .side-panel {
            width: 350px;
            background-color: var(--surface);
            border-left: 1px solid var(--border-color);
            padding: 1rem;
            display: flex;
            flex-direction: column;
            animation: slideInRight 0.5s ease-out;
            overflow-y: auto;
        }
        .tabs-list {
            display: flex;
            background-color: #334155;
            border-radius: 0.75rem;
            padding: 0.25rem;
        }
        .tab-button {
            flex: 1;
            padding: 0.625rem 0;
            font-size: 0.875rem;
            font-weight: 500;
            border: none;
            background: none;
            color: #E2E8F0;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
        }
        .tab-button.active {
            background-color: var(--primary);
            color: white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .tab-panels {
            flex: 1;
            margin-top: 0.5rem;
        }
        .tab-panel {
            display: none;
            padding: 0.75rem;
            color: var(--neutral);
        }
        .tab-panel.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        .debugger-content h3 { 
            font-weight: bold; 
            color: white; 
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .variables {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 12px;
        }
        .var-item {
            background-color: var(--background);
            padding: 12px;
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .var-name {
            font-size: 0.85rem;
            color: var(--neutral);
            margin-bottom: 5px;
            display: block;
        }
        .var-value {
            font-family: var(--font-mono);
            font-size: 0.95rem;
            display: block;
            word-break: break-all;
        }
        .var-value.number {
            color: var(--block-variable);
        }
        .var-value.string {
            color: var(--accent);
        }
        .var-value.boolean {
            color: var(--block-condition);
        }

        /* Blocs sur le canvas */
        .canvas-block {
            position: absolute;
            padding: 0.75rem;
            border-radius: 0.375rem;
            font-family: var(--font-mono);
            font-size: 0.875rem;
            color: white;
            cursor: move;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 20;
            min-width: 200px;
            border-left: 4px solid;
        }
        .canvas-block:hover {
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.25);
        }

        /* --- Responsive Design --- */
        @media (max-width: 1024px) {
            .block-palette, .side-panel, .progress-bar-container {
                display: none;
            }
            .header .profile-section .username {
                display: none;
            }
        }
    </style>
</head>
<body>

    <div class="app-container">
        <!-- ==================== HEADER ==================== -->
        <header class="header">
            <div class="logo">
                <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="16" y="16" width="6" height="6" rx="1"/><rect x="2" y="16" width="6" height="6" rx="1"/><rect x="9" y="2" width="6" height="6" rx="1"/><path d="M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3"/><path d="M12 12V8"/></svg>
                <h1>AlgoScript Academy</h1>
            </div>

            <div class="progress-bar-container">
                <div class="progress-bar-bg">
                    <div class="progress-bar-fill"></div>
                </div>
                <p class="progress-text">Monde 4 - Boucles de Base (Niveau 3/8)</p>
            </div>

            <div class="profile-section">
                <button class="icon-button">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg>
                </button>
                <button class="icon-button">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>
                </button>
                <img src="https://api.dicebear.com/7.x/bottts/svg?seed=Felix" alt="Avatar" class="avatar">
                <span class="username">Élève Test</span>
            </div>
        </header>

        <div class="main-content">
            <!-- ==================== PANNEAU DE GAUCHE (PALETTE DE BLOCS) ==================== -->
            <aside class="block-palette">
                <div class="block-category">
                    <h3 class="block-category-title" style="color: var(--block-variable);">
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 18s-4-6-4-10a4 4 0 1 1 8 0c0 4-4 10-4 10z"/><path d="M12 12a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>
                        Variables
                    </h3>
                    <div class="draggable-block" data-type="variable" style="border-left-color: var(--block-variable); background-color: var(--block-variable);">Créer variable 'nom'</div>
                    <div class="draggable-block" data-type="variable" style="border-left-color: var(--block-variable); background-color: var(--block-variable);">Modifier 'nom' = ...</div>
                    <div class="draggable-block" data-type="variable" style="border-left-color: var(--block-variable); background-color: var(--block-variable);">Afficher variable</div>
                </div>

                <div class="block-category">
                    <h3 class="block-category-title" style="color: var(--block-condition);">
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 3v12"/><path d="M18 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/><path d="M6 21a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/><path d="M18 21a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/><path d="M6 15h12"/></svg>
                        Conditions
                    </h3>
                    <div class="draggable-block" data-type="condition" style="border-left-color: var(--block-condition); background-color: var(--block-condition);">Si ... alors</div>
                    <div class="draggable-block" data-type="condition" style="border-left-color: var(--block-condition); background-color: var(--block-condition);">Si ... alors ... sinon</div>
                    <div class="draggable-block" data-type="condition" style="border-left-color: var(--block-condition); background-color: var(--block-condition);">Si ... alors ... sinon si</div>
                </div>
                
                <div class="block-category">
                    <h3 class="block-category-title" style="color: var(--block-loop);">
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/></svg>
                        Boucles
                    </h3>
                    <div class="draggable-block" data-type="loop" style="border-left-color: var(--block-loop); background-color: var(--block-loop);">Répéter ... fois</div>
                    <div class="draggable-block" data-type="loop" style="border-left-color: var(--block-loop); background-color: var(--block-loop);">Tant que ...</div>
                    <div class="draggable-block" data-type="loop" style="border-left-color: var(--block-loop); background-color: var(--block-loop);">Pour chaque élément</div>
                </div>

                <div class="block-category">
                    <h3 class="block-category-title" style="color: var(--block-function);">
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><path d="M12 12h8"/><path d="M12 12v8"/><path d="M12 12l5-5"/></svg>
                        Fonctions
                    </h3>
                    <div class="draggable-block" data-type="function" style="border-left-color: var(--block-function); background-color: var(--block-function);">Créer fonction ...</div>
                    <div class="draggable-block" data-type="function" style="border-left-color: var(--block-function); background-color: var(--block-function);">Appeler fonction</div>
                    <div class="draggable-block" data-type="function" style="border-left-color: var(--block-function); background-color: var(--block-function);">Retourner valeur</div>
                </div>
            </aside>

            <!-- ==================== ZONE CENTRALE (CANVAS & CONSOLE) ==================== -->
            <div class="center-area">
                <main class="main-canvas" id="canvas-area">
                    <div class="grid-background">
                        <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
                            <defs>
                                <pattern id="smallGrid" width="8" height="8" patternUnits="userSpaceOnUse">
                                    <path d="M 8 0 L 0 0 0 8" fill="none" stroke="#2A3B51" stroke-width="0.5"/>
                                </pattern>
                                <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
                                    <rect width="40" height="40" fill="url(#smallGrid)"/>
                                    <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#334155" stroke-width="1"/>
                                </pattern>
                            </defs>
                            <rect width="100%" height="100%" fill="url(#grid)" />
                        </svg>
                    </div>
                    <div class="canvas-content">
                        <h2>Glissez & déposez les blocs ici</h2>
                        <p>Créez votre premier algorithme en faisant glisser des blocs de la palette vers cette zone. Connectez-les pour former un programme fonctionnel.</p>
                    </div>
                    
                    <!-- Exemple de blocs sur le canvas -->
                    <div class="canvas-block" data-type="variable" style="border-left-color: var(--block-variable); background-color: var(--block-variable); left: 100px; top: 80px;">
                        Créer variable 'score' = 0
                    </div>
                    <div class="canvas-block" data-type="loop" style="border-left-color: var(--block-loop); background-color: var(--block-loop); left: 100px; top: 150px;">
                        Répéter 5 fois
                    </div>
                </main>

                <footer class="execution-console">
                    <div class="console-header">
                        <span class="title">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m7 11 5-5-5-5"/><path d="M12 4h3a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-3"/></svg>
                            Console d'Exécution
                        </span>
                        <div class="controls">
                            <button class="control-button play" title="Exécuter">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                            </button>
                            <button class="control-button pause" title="Pause">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
                            </button>
                            <button class="control-button stop" title="Arrêter">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/></svg>
                            </button>
                            <button class="control-button clear" title="Effacer">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></svg>
                            </button>
                        </div>
                    </div>
                    <div class="console-output">
                        <p>> Bienvenue dans AlgoScript Academy!</p>
                        <p>> Prêt à créer votre premier algorithme.</p>
                        <p class="log-variable">> Variable 'score' initialisée à 0.</p>
                        <p>> Boucle répétée 5 fois.</p>
                        <p class="log-error">> Erreur: La variable 'resultat' n'est pas définie.</p>
                        <p>> Exécution terminée en 0.42s.</p>
                    </div>
                </footer>
            </div>

            <!-- ==================== PANNEAU DE DROITE (DÉBOGUEUR) ==================== -->
            <aside class="side-panel">
                <div class="tabs-list">
                    <button class="tab-button active" data-tab="debugger">Débogueur</button>
                    <button class="tab-button" data-tab="properties">Propriétés</button>
                    <button class="tab-button" data-tab="achievements">Récompenses</button>
                </div>
                <div class="tab-panels">
                    <div id="debugger" class="tab-panel active">
                        <div class="debugger-content">
                            <h3>
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/></svg>
                                Variables en temps réel
                            </h3>
                            <div class="variables">
                                <div class="var-item">
                                    <span class="var-name">score</span>
                                    <span class="var-value number">150</span>
                                </div>
                                <div class="var-item">
                                    <span class="var-name">nom</span>
                                    <span class="var-value string">"Joueur1"</span>
                                </div>
                                <div class="var-item">
                                    <span class="var-name">estGagnant</span>
                                    <span class="var-value boolean">false</span>
                                </div>
                                <div class="var-item">
                                    <span class="var-name">items</span>
                                    <span class="var-value">["Épée", "Bouclier", "Potion"]</span>
                                </div>
                                <div class="var-item">
                                    <span class="var-name">compteur</span>
                                    <span class="var-value number">5</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="properties" class="tab-panel">
                        <p>Propriétés du bloc sélectionné...</p>
                    </div>
                    <div id="achievements" class="tab-panel">
                        <p>Récompenses obtenues...</p>
                    </div>
                </div>
            </aside>
        </div>
    </div>

   <script>
    document.addEventListener('DOMContentLoaded', () => {
        // Gestion des onglets
        const tabButtons = document.querySelectorAll('.tab-button');
        const tabPanels = document.querySelectorAll('.tab-panel');

        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                tabButtons.forEach(btn => btn.classList.remove('active'));
                tabPanels.forEach(panel => panel.classList.remove('active'));

                button.classList.add('active');
                const targetPanel = document.getElementById(button.dataset.tab);
                if (targetPanel) targetPanel.classList.add('active');
            });
        });

        // Système de glisser-déposer amélioré
        const draggableBlocks = document.querySelectorAll('.draggable-block');
        const canvasArea = document.getElementById('canvas-area');
        let isDragging = false;
        let currentBlock = null;
        let offsetX, offsetY;

        function startDrag(e, block) {
            isDragging = true;
            currentBlock = block.cloneNode(true);
            currentBlock.classList.add('canvas-block');

            const rect = block.getBoundingClientRect();
            offsetX = e.clientX - rect.left;
            offsetY = e.clientY - rect.top;

            currentBlock.style.position = 'absolute';
            currentBlock.style.left = `${e.pageX - offsetX}px`;
            currentBlock.style.top = `${e.pageY - offsetY}px`;
            currentBlock.style.opacity = '0.9';
            currentBlock.style.transform = 'scale(1.05)';

            canvasArea.appendChild(currentBlock);

            e.preventDefault();
        }

        function dragMove(e) {
            if (!isDragging || !currentBlock) return;

            currentBlock.style.left = `${e.pageX - offsetX}px`;
            currentBlock.style.top = `${e.pageY - offsetY}px`;
        }

        function stopDrag(e) {
            if (!isDragging || !currentBlock) return;

            isDragging = false;
            currentBlock.style.opacity = '1';
            currentBlock.style.transform = 'scale(1)';
            currentBlock = null;
        }

        // Ajouter les écouteurs aux blocs de la palette
        draggableBlocks.forEach(block => {
            block.addEventListener('mousedown', (e) => {
                startDrag(e, block);
            });
        });

        // Permet de déplacer les blocs existants sur le canvas
        canvasArea.addEventListener('mousedown', (e) => {
            const targetBlock = e.target.closest('.canvas-block');
            if (targetBlock) {
                startDrag(e, targetBlock);
                setTimeout(() => targetBlock.remove(), 10);
            }
        });

        // Événements globaux pour déplacer et relâcher les blocs
        document.addEventListener('mousemove', dragMove);
        document.addEventListener('mouseup', stopDrag);

        // Gestion des boutons de la console
        const playButton = document.querySelector('.control-button.play');
        const stopButton = document.querySelector('.control-button.stop');
        const clearButton = document.querySelector('.control-button.clear');
        const consoleOutput = document.querySelector('.console-output');

        playButton.addEventListener('click', () => {
            consoleOutput.innerHTML += '<p>> Démarrage de l\'exécution...</p>';
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        });

        stopButton.addEventListener('click', () => {
            consoleOutput.innerHTML += '<p class="log-error">> Exécution interrompue.</p>';
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        });

        clearButton.addEventListener('click', () => {
            consoleOutput.innerHTML = '<p>> Console effacée. Prêt pour une nouvelle exécution.</p>';
        });
    });
</script>
</body>
</html>
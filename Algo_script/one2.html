<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fonctions Logarithmiques - Classe Interactive</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        .floating-elements {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .float-math {
            position: absolute;
            color: rgba(255,255,255,0.1);
            font-size: 2rem;
            font-weight: bold;
            animation: floatMath 15s linear infinite;
        }

        @keyframes floatMath {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 10;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            animation: slideInDown 1s ease-out;
        }

        .header h1 {
            font-size: 3.5rem;
            margin-bottom: 10px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            background: linear-gradient(45deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            font-size: 1.4rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .class-dashboard {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 30px;
            margin-bottom: 30px;
        }

        .main-board {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: 40px;
            backdrop-filter: blur(15px);
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            border: 2px solid rgba(255,255,255,0.2);
        }

        .team-panel {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 25px;
            padding: 25px;
            backdrop-filter: blur(15px);
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
        }

        .team-creator {
            margin-bottom: 30px;
        }

        .team-input {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .team-input input {
            flex: 1;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 25px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .team-input input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
        }

        .add-team-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .add-team-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .teams-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .team-card {
            background: linear-gradient(135deg, #ff6b6b, #feca57);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
            color: white;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }

        .team-card:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
        }

        .team-card.active {
            border-color: #FFD700;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
        }

        .team-name {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .team-score {
            font-size: 2rem;
            font-weight: bold;
            text-align: center;
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 10px;
            margin-top: 10px;
        }

        .lesson-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 30px;
            backdrop-filter: blur(15px);
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            animation: slideInUp 0.8s ease-out;
        }

        .section-title {
            font-size: 2.5rem;
            color: #2d3748;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .section-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .collaborative-space {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 20px;
            padding: 30px;
            margin: 25px 0;
            color: white;
        }

        .activity-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .activity-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.2);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .activity-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
            border-color: #FFD700;
        }

        .activity-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }

        .activity-card:hover::before {
            left: 100%;
        }

        .math-playground {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            border-radius: 20px;
            padding: 30px;
            margin: 25px 0;
            color: white;
        }

        .graph-container {
            background: #1a1a1a;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
        }

        .graph-canvas {
            width: 100%;
            height: 400px;
            background: #000;
            border-radius: 10px;
            position: relative;
        }

        .collaborative-tools {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .tool-card {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .tool-card:hover {
            border-color: #FFD700;
            transform: scale(1.05);
        }

        .challenge-arena {
            background: linear-gradient(135deg, #fd79a8, #fdcb6e);
            border-radius: 25px;
            padding: 40px;
            margin: 30px 0;
            color: white;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .challenge-arena::before {
            content: 'üèÜ';
            position: absolute;
            top: -20px;
            right: -20px;
            font-size: 8rem;
            opacity: 0.1;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .challenge-question {
            background: rgba(255,255,255,0.2);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            font-size: 1.3rem;
            line-height: 1.6;
        }

        .answer-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 25px 0;
        }

        .answer-btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 15px;
            padding: 20px;
            color: white;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .answer-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .answer-btn.correct {
            background: rgba(0,255,0,0.3);
            border-color: #00ff00;
            animation: pulse 0.5s ease-in-out;
        }

        .answer-btn.incorrect {
            background: rgba(255,0,0,0.3);
            border-color: #ff0000;
            animation: shake 0.5s ease-in-out;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .formula-builder {
            background: linear-gradient(135deg, #a8edea, #fed6e3);
            border-radius: 20px;
            padding: 30px;
            margin: 25px 0;
            color: #2d3748;
        }

        .formula-display {
            background: white;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            font-size: 2.5rem;
            font-weight: bold;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border: 3px solid #667eea;
        }

        .symbol-palette {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }

        .symbol-btn {
            background: #667eea;
            color: white;
            border: none;
            border-radius: 10px;
            padding: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .symbol-btn:hover {
            background: #764ba2;
            transform: scale(1.1);
        }

        .leaderboard {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            color: white;
        }

        .podium {
            display: flex;
            justify-content: center;
            align-items: end;
            gap: 20px;
            margin: 20px 0;
        }

        .podium-place {
            background: rgba(255,255,255,0.2);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            min-width: 120px;
            backdrop-filter: blur(10px);
        }

        .podium-place.first {
            height: 120px;
            background: linear-gradient(135deg, #FFD700, #FFA500);
        }

        .podium-place.second {
            height: 100px;
            background: linear-gradient(135deg, #C0C0C0, #A0A0A0);
        }

        .podium-place.third {
            height: 80px;
            background: linear-gradient(135deg, #CD7F32, #B8860B);
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #00b894, #00cec9);
            color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        .notification.show {
            transform: translateX(0);
        }

        @keyframes slideInDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .progress-ring {
            width: 100px;
            height: 100px;
            position: relative;
            margin: 20px auto;
        }

        .progress-ring svg {
            width: 100px;
            height: 100px;
            transform: rotate(-90deg);
        }

        .progress-ring circle {
            fill: none;
            stroke-width: 8;
            cx: 50;
            cy: 50;
            r: 42;
        }

        .progress-ring .background {
            stroke: rgba(255,255,255,0.2);
        }

        .progress-ring .progress {
            stroke: #FFD700;
            stroke-dasharray: 264;
            stroke-dashoffset: 264;
            transition: stroke-dashoffset 0.5s ease;
        }

        @media (max-width: 768px) {
            .class-dashboard {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2.5rem;
            }
            
            .activity-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="floating-elements" id="floatingElements"></div>
    
    <div class="container">
        <div class="header">
            <h1>üìä FONCTIONS LOGARITHMIQUES</h1>
            <div class="subtitle">Terminale C/D - Programme Camerounais</div>
            <div class="subtitle">üéØ Apprentissage Collaboratif Interactif</div>
        </div>

        <div class="class-dashboard">
            <div class="main-board">
                <div class="section-title">
                    <div class="section-icon">üöÄ</div>
                    Tableau de Bord Classe
                </div>
                
                <div class="progress-ring">
                    <svg>
                        <circle class="background" cx="50" cy="50" r="42"></circle>
                        <circle class="progress" cx="50" cy="50" r="42" id="lessonProgress"></circle>
                    </svg>
                    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-weight: bold; color: #667eea;">
                        <span id="progressText">0%</span>
                    </div>
                </div>

                <div style="text-align: center; margin: 20px 0;">
                    <h3 style="color: #2d3748; margin-bottom: 15px;">Objectifs de la Le√ßon</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div style="background: linear-gradient(135deg, #74b9ff, #0984e3); color: white; padding: 15px; border-radius: 15px;">
                            <strong>D√©finir</strong><br>ln(x) et log(x)
                        </div>
                        <div style="background: linear-gradient(135deg, #fd79a8, #fdcb6e); color: white; padding: 15px; border-radius: 15px;">
                            <strong>√âtudier</strong><br>Propri√©t√©s
                        </div>
                        <div style="background: linear-gradient(135deg, #00b894, #00cec9); color: white; padding: 15px; border-radius: 15px;">
                            <strong>R√©soudre</strong><br>√âquations
                        </div>
                        <div style="background: linear-gradient(135deg, #e17055, #fab1a0); color: white; padding: 15px; border-radius: 15px;">
                            <strong>Appliquer</strong><br>Probl√®mes
                        </div>
                    </div>
                </div>
            </div>

            <div class="team-panel">
                <h3 style="color: #2d3748; margin-bottom: 20px; text-align: center;">üë• √âquipes</h3>
                
                <div class="team-creator">
                    <div class="team-input">
                        <input type="text" id="teamNameInput" placeholder="Nom de l'√©quipe" maxlength="20">
                        <button class="add-team-btn" onclick="addTeam()">‚ûï</button>
                    </div>
                </div>

                <div class="teams-list" id="teamsList">
                    <!-- Les √©quipes appara√Ætront ici -->
                </div>

                <div class="leaderboard">
                    <h4 style="text-align: center; margin-bottom: 15px;">üèÜ Classement</h4>
                    <div class="podium" id="podium">
                        <!-- Le podium sera g√©n√©r√© dynamiquement -->
                    </div>
                </div>
            </div>
        </div>

        <div class="lesson-section">
            <div class="section-title">
                <div class="section-icon">üìñ</div>
                Introduction Interactive
            </div>
            
            <div class="collaborative-space">
                <h3 style="margin-bottom: 20px;">ü§ù Activit√© Collaborative : D√©couverte</h3>
                <p style="font-size: 1.2rem; line-height: 1.6; margin-bottom: 25px;">
                    Chaque √©quipe va explorer un aspect diff√©rent des logarithmes. Travaillez ensemble pour d√©couvrir les secrets de ces fonctions fascinantes !
                </p>

                <div class="activity-grid">
                    <div class="activity-card" onclick="startActivity('definition')">
                        <h4>üîç Mission D√©finition</h4>
                        <p>D√©couvrez ce qu'est vraiment un logarithme. Relation avec l'exponentielle ?</p>
                        <div style="margin-top: 15px; font-weight: bold; color: #FFD700;">√âquipe 1-2</div>
                    </div>

                    <div class="activity-card" onclick="startActivity('properties')">
                        <h4>‚ö° Mission Propri√©t√©s</h4>
                        <p>Explorez les propri√©t√©s magiques : ln(ab) = ln(a) + ln(b)</p>
                        <div style="margin-top: 15px; font-weight: bold; color: #FFD700;">√âquipe 3-4</div>
                    </div>

                    <div class="activity-card" onclick="startActivity('graphs')">
                        <h4>üìà Mission Graphiques</h4>
                        <p>Analysez les courbes, domaines, limites et variations</p>
                        <div style="margin-top: 15px; font-weight: bold; color: #FFD700;">√âquipe 5-6</div>
                    </div>

                    <div class="activity-card" onclick="startActivity('applications')">
                        <h4>üåç Mission Applications</h4>
                        <p>Trouvez les logarithmes dans la vraie vie : sciences, √©conomie...</p>
                        <div style="margin-top: 15px; font-weight: bold; color: #FFD700;">Toutes √©quipes</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="lesson-section">
            <div class="section-title">
                <div class="section-icon">üéØ</div>
                Laboratoire Math√©matique
            </div>

            <div class="math-playground">
                <h3 style="margin-bottom: 20px;">üß™ Exp√©rimentez avec les Logarithmes</h3>
                
                <div class="formula-builder">
                    <h4 style="color: #2d3748; margin-bottom: 15px;">üîß Constructeur de Formules Collaboratif</h4>
                    <div class="formula-display" id="formulaDisplay">
                        Cliquez sur les symboles pour construire une formule !
                    </div>
                    
                    <div class="symbol-palette">
                        <button class="symbol-btn" onclick="addSymbol('ln(')">ln(</button>
                        <button class="symbol-btn" onclick="addSymbol('log(')">log(</button>
                        <button class="symbol-btn" onclick="addSymbol('x')">x</button>
                        <button class="symbol-btn" onclick="addSymbol(')')">)</button>
                        <button class="symbol-btn" onclick="addSymbol('+')">&plus;</button>
                        <button class="symbol-btn" onclick="addSymbol('-')">&minus;</button>
                        <button class="symbol-btn" onclick="addSymbol('*')">&times;</button>
                        <button class="symbol-btn" onclick="addSymbol('/')">&divide;</button>
                        <button class="symbol-btn" onclick="addSymbol('=')">=</button>
                        <button class="symbol-btn" onclick="addSymbol('e')">e</button>
                        <button class="symbol-btn" onclick="addSymbol('^')">^</button>
                        <button class="symbol-btn" onclick="clearFormula()">üóëÔ∏è</button>
                    </div>
                </div>

                <div class="graph-container">
                    <h4 style="color: white; margin-bottom: 15px;">üìä Graphique Interactif Collaboratif</h4>
                    <div class="graph-canvas">
                        <canvas id="graphCanvas" width="800" height="400"></canvas>
                    </div>
                    
                    <div class="collaborative-tools">
                        <div class="tool-card" onclick="drawFunction('ln')">
                            <h5>üîµ ln(x)</h5>
                            <p>Logarithme naturel</p>
                        </div>
                        <div class="tool-card" onclick="drawFunction('log')">
                            <h5>üî¥ log(x)</h5>
                            <p>Logarithme d√©cimal</p>
                        </div>
                        <div class="tool-card" onclick="drawFunction('exp')">
                            <h5>üü¢ e^x</h5>
                            <p>Fonction exponentielle</p>
                        </div>
                        <div class="tool-card" onclick="clearGraph()">
                            <h5>üßπ Effacer</h5>
                            <p>Nouveau graphique</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="challenge-arena">
            <h2 style="margin-bottom: 20px;">‚öîÔ∏è D√âFI LOGARITHMIQUE</h2>
            <p style="font-size: 1.3rem; margin-bottom: 25px;">
                Affrontement par √©quipes ! Premi√®re √©quipe √† r√©pondre correctement gagne des points !
            </p>

            <div class="challenge-question" id="challengeQuestion">
                <strong>Question 1:</strong> Si ln(x) = 2, quelle est la valeur de x ?
            </div>

            <div class="answer-options">
                <button class="answer-btn" onclick="checkAnswer(this, false, 'e¬≤')">A) e¬≤</button>
                <button class="answer-btn" onclick="checkAnswer(this, true, 'e¬≤')">B) e¬≤</button>
                <button class="answer-btn" onclick="checkAnswer(this, false, '2e')">C) 2e</button>
                <button class="answer-btn" onclick="checkAnswer(this, false, 'ln(2)')">D) ln(2)</button>
            </div>

            <div style="margin-top: 30px;">
                <button class="demo-button" onclick="nextChallenge()" style="background: rgba(255,255,255,0.2); border: 2px solid white; padding: 15px 30px; border-radius: 25px; color: white; font-size: 1.1rem; cursor: pointer;">
                    ‚û°Ô∏è Question Suivante
                </button>
            </div>
        </div>
    </div>

    <div class="notification" id="notification">
        <strong>üéâ Notification</strong>
        <p id="notificationText">Bienvenue dans la classe interactive !</p>
    </div>

    <script>
        // Variables globales
        let teams = [];
        let currentFormula = '';
        let currentChallenge = 0;
        let lessonProgress = 0;

        // Formules math√©matiques pour l'animation
        const mathSymbols = ['ln(x)', 'log(x)', 'e^x', '‚à´', '‚àÇ', 'Œ£', 'œÄ', '‚àû', 'Œ±', 'Œ≤', 'Œ≥', 'Œ¥', 'Œ∏', 'Œª', 'Œº', 'œÉ', '‚àö', '‚àÜ'];

        // Initialisation
        window.addEventListener('load', () => {
            createFloatingMath();
            initializeCanvas();
            showNotification('üöÄ Classe interactive lanc√©e ! Cr√©ez vos √©quipes pour commencer !');
            updateProgress(10);
        });

        // Animation des symboles math√©matiques flottants
        function createFloatingMath() {
            const container = document.getElementById('floatingElements');
            
            setInterval(() => {
                const symbol = document.createElement('div');
                symbol.className = 'float-math';
                symbol.textContent = mathSymbols[Math.floor(Math.random() * mathSymbols.length)];
                symbol.style.left = Math.random() * 100 + '%';
                symbol.style.animationDuration = (Math.random() * 10 + 5) + 's';
                container.appendChild(symbol);

                // Nettoyer apr√®s animation
                setTimeout(() => {
                    if (symbol.parentNode) {
                        symbol.parentNode.removeChild(symbol);
                    }
                }, 15000);
            }, 2000);
        }

        // Gestion des √©quipes
        function addTeam() {
            const input = document.getElementById('teamNameInput');
            const teamName = input.value.trim();
            
            if (teamName && teams.length < 8) {
                const team = {
                    id: teams.length + 1,
                    name: teamName,
                    score: 0,
                    color: getRandomColor(),
                    active: false
                };
                
                teams.push(team);
                input.value = '';
                updateTeamsDisplay();
                showNotification(`üéâ √âquipe "${teamName}" cr√©√©e avec succ√®s !`);
                updateProgress(lessonProgress + 5);
            } else if (teams.length >= 8) {
                showNotification('‚ö†Ô∏è Maximum 8 √©quipes autoris√©es !');
            } else {
                showNotification('‚ùå Veuillez entrer un nom d\'√©quipe !');
            }
        }

        function getRandomColor() {
            const colors = [
                'linear-gradient(135deg, #ff6b6b, #feca57)',
                'linear-gradient(135deg, #74b9ff, #0984e3)',
                'linear-gradient(135deg, #fd79a8, #fdcb6e)',
                'linear-gradient(135deg, #00b894, #00cec9)',
                'linear-gradient(135deg, #e17055, #fab1a0)',
                'linear-gradient(135deg, #a29bfe, #6c5ce7)',
                'linear-gradient(135deg, #ffeaa7, #fab1a0)',
                'linear-gradient(135deg, #55a3ff, #003d82)'
            ];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        function updateTeamsDisplay() {
            const container = document.getElementById('teamsList');
            container.innerHTML = '';
            
            teams.forEach(team => {
                const teamCard = document.createElement('div');
                teamCard.className = `team-card ${team.active ? 'active' : ''}`;
                teamCard.style.background = team.color;
                teamCard.onclick = () => toggleTeam(team.id);
                
                teamCard.innerHTML = `
                    <div class="team-name">üè∑Ô∏è ${team.name}</div>
                    <div style="font-size: 0.9rem; opacity: 0.9;">√âquipe #${team.id}</div>
                    <div class="team-score">${team.score} pts</div>
                `;
                
                container.appendChild(teamCard);
            });
            
            updateLeaderboard();
        }

        function toggleTeam(teamId) {
            teams.forEach(team => {
                if (team.id === teamId) {
                    team.active = !team.active;
                    showNotification(`${team.active ? '‚úÖ √âquipe activ√©e' : '‚è∏Ô∏è √âquipe d√©sactiv√©e'}: ${team.name}`);
                }
            });
            updateTeamsDisplay();
        }

        function updateLeaderboard() {
            const podium = document.getElementById('podium');
            const sortedTeams = [...teams].sort((a, b) => b.score - a.score).slice(0, 3);
            
            podium.innerHTML = '';
            
            if (sortedTeams.length >= 2) {
                // 2√®me place
                const second = document.createElement('div');
                second.className = 'podium-place second';
                second.innerHTML = `
                    <div style="font-size: 2rem;">ü•à</div>
                    <div style="font-weight: bold;">${sortedTeams[1].name}</div>
                    <div>${sortedTeams[1].score} pts</div>
                `;
                podium.appendChild(second);
            }
            
            if (sortedTeams.length >= 1) {
                // 1√®re place
                const first = document.createElement('div');
                first.className = 'podium-place first';
                first.innerHTML = `
                    <div style="font-size: 2rem;">ü•á</div>
                    <div style="font-weight: bold;">${sortedTeams[0].name}</div>
                    <div>${sortedTeams[0].score} pts</div>
                `;
                podium.appendChild(first);
            }
            
            if (sortedTeams.length >= 3) {
                // 3√®me place
                const third = document.createElement('div');
                third.className = 'podium-place third';
                third.innerHTML = `
                    <div style="font-size: 2rem;">ü•â</div>
                    <div style="font-weight: bold;">${sortedTeams[2].name}</div>
                    <div>${sortedTeams[2].score} pts</div>
                `;
                podium.appendChild(third);
            }
        }

        // Gestion des activit√©s collaboratives
        function startActivity(type) {
            const activities = {
                definition: {
                    title: 'üîç Mission D√©finition',
                    content: 'ACTIVIT√â COLLABORATIVE:\n\n1. Discutez en √©quipe: Que signifie ln(x) = y ?\n2. Trouvez la relation avec e^y = x\n3. Pr√©sentez votre d√©couverte √† la classe !\n\nIndice: Pensez √† la fonction r√©ciproque de l\'exponentielle...',
                    points: 15
                },
                properties: {
                    title: '‚ö° Mission Propri√©t√©s',
                    content: 'D√âFI √âQUIPE:\n\n1. D√©montrez que ln(ab) = ln(a) + ln(b)\n2. Trouvez les autres propri√©t√©s importantes\n3. Cr√©ez un aide-m√©moire pour la classe !\n\nPropriet√©s √† d√©couvrir:\n‚Ä¢ ln(a/b) = ?\n‚Ä¢ ln(a^n) = ?\n‚Ä¢ ln(1) = ? et ln(e) = ?',
                    points: 20
                },
                graphs: {
                    title: 'üìà Mission Graphiques',
                    content: 'ANALYSE COLLABORATIVE:\n\n1. √âtudiez le domaine de d√©finition\n2. Trouvez les limites en 0+ et +‚àû\n3. Calculez la d√©riv√©e et √©tudiez les variations\n4. Dessinez la courbe sur le tableau !\n\nQuestions guides:\n‚Ä¢ Pourquoi ln(x) n\'existe pas pour x ‚â§ 0 ?\n‚Ä¢ Que se passe-t-il quand x ‚Üí 0+ ?',
                    points: 25
                },
                applications: {
                    title: 'üåç Mission Applications',
                    content: 'RECHERCHE D\'√âQUIPE:\n\n1. Trouvez 3 applications r√©elles des logarithmes\n2. Pr√©parez une pr√©sentation de 2 minutes\n3. Expliquez pourquoi c\'est utile dans la vie !\n\nDomaines √† explorer:\n‚Ä¢ Sciences (pH, d√©cibels, Richter)\n‚Ä¢ √âconomie (int√©r√™ts compos√©s)\n‚Ä¢ Informatique (complexit√© algorithmique)\n‚Ä¢ Biologie (croissance cellulaire)',
                    points: 30
                }
            };
            
            const activity = activities[type];
            if (activity) {
                alert(`${activity.title}\n\n${activity.content}\n\nüèÜ Points √† gagner: ${activity.points}`);
                showNotification(`üöÄ Activit√© "${activity.title}" lanc√©e ! Bonne chance aux √©quipes !`);
                updateProgress(lessonProgress + 10);
            }
        }

        // Constructeur de formules
        function addSymbol(symbol) {
            currentFormula += symbol;
            document.getElementById('formulaDisplay').textContent = currentFormula || 'Cliquez sur les symboles pour construire une formule !';
            
            // V√©rifier si c'est une formule connue
            checkFormula();
        }

        function clearFormula() {
            currentFormula = '';
            document.getElementById('formulaDisplay').textContent = 'Cliquez sur les symboles pour construire une formule !';
        }

        function checkFormula() {
            const knownFormulas = {
                'ln(x*y)=ln(x)+ln(y)': 'üéâ Propri√©t√© du produit d√©couverte ! +10 points pour toutes les √©quipes actives !',
                'ln(x/y)=ln(x)-ln(y)': 'üéâ Propri√©t√© du quotient d√©couverte ! +10 points pour toutes les √©quipes actives !',
                'ln(x^n)=n*ln(x)': 'üéâ Propri√©t√© de la puissance d√©couverte ! +15 points pour toutes les √©quipes actives !',
                'ln(e)=1': 'üéâ Valeur remarquable d√©couverte ! +5 points pour toutes les √©quipes actives !',
                'ln(1)=0': 'üéâ Valeur remarquable d√©couverte ! +5 points pour toutes les √©quipes actives !'
            };
            
            const cleanFormula = currentFormula.replace(/\s/g, '');
            
            for (let formula in knownFormulas) {
                if (cleanFormula === formula) {
                    showNotification(knownFormulas[formula]);
                    awardPointsToActiveTeams(parseInt(knownFormulas[formula].match(/\+(\d+)/)[1]));
                    updateProgress(lessonProgress + 5);
                    break;
                }
            }
        }

        // Canvas pour graphiques
        function initializeCanvas() {
            const canvas = document.getElementById('graphCanvas');
            const ctx = canvas.getContext('2d');
            
            // Dessiner les axes
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            ctx.beginPath();
            // Axe X
            ctx.moveTo(50, 200);
            ctx.lineTo(750, 200);
            // Axe Y
            ctx.moveTo(400, 50);
            ctx.lineTo(400, 350);
            ctx.stroke();
            
            // Labels des axes
            ctx.fillStyle = '#666';
            ctx.font = '14px Arial';
            ctx.fillText('x', 760, 205);
            ctx.fillText('y', 405, 45);
            ctx.fillText('O', 385, 215);
            
            // Graduations
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 1;
            for (let i = 1; i <= 10; i++) {
                // Graduations X
                const x = 400 + i * 30;
                ctx.beginPath();
                ctx.moveTo(x, 195);
                ctx.lineTo(x, 205);
                ctx.stroke();
                ctx.fillText(i.toString(), x - 5, 220);
                
                // Graduations Y
                const y = 200 - i * 15;
                ctx.beginPath();
                ctx.moveTo(395, y);
                ctx.lineTo(405, y);
                ctx.stroke();
                ctx.fillText(i.toString(), 375, y + 5);
            }
        }

        function drawFunction(type) {
            const canvas = document.getElementById('graphCanvas');
            const ctx = canvas.getContext('2d');
            
            ctx.lineWidth = 3;
            
            if (type === 'ln') {
                ctx.strokeStyle = '#0984e3';
                ctx.beginPath();
                for (let x = 0.1; x <= 10; x += 0.1) {
                    const canvasX = 400 + x * 30;
                    const canvasY = 200 - Math.log(x) * 30;
                    if (x === 0.1) ctx.moveTo(canvasX, canvasY);
                    else ctx.lineTo(canvasX, canvasY);
                }
                ctx.stroke();
                showNotification('üìä Fonction ln(x) trac√©e en bleu !');
                
            } else if (type === 'log') {
                ctx.strokeStyle = '#e17055';
                ctx.beginPath();
                for (let x = 0.1; x <= 10; x += 0.1) {
                    const canvasX = 400 + x * 30;
                    const canvasY = 200 - Math.log10(x) * 30;
                    if (x === 0.1) ctx.moveTo(canvasX, canvasY);
                    else ctx.lineTo(canvasX, canvasY);
                }
                ctx.stroke();
                showNotification('üìä Fonction log(x) trac√©e en rouge !');
                
            } else if (type === 'exp') {
                ctx.strokeStyle = '#00b894';
                ctx.beginPath();
                for (let x = -3; x <= 3; x += 0.1) {
                    const canvasX = 400 + x * 30;
                    const canvasY = 200 - Math.exp(x) * 10;
                    if (canvasY > 50 && canvasY < 350) {
                        if (x === -3) ctx.moveTo(canvasX, canvasY);
                        else ctx.lineTo(canvasX, canvasY);
                    }
                }
                ctx.stroke();
                showNotification('üìä Fonction e^x trac√©e en vert !');
            }
            
            awardPointsToActiveTeams(5);
            updateProgress(lessonProgress + 3);
        }

        function clearGraph() {
            const canvas = document.getElementById('graphCanvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            initializeCanvas();
            showNotification('üßπ Graphique effac√© !');
        }

        // Syst√®me de d√©fis
        const challenges = [
            {
                question: "Si ln(x) = 2, quelle est la valeur de x ?",
                options: ["2", "e¬≤", "2e", "ln(2)"],
                correct: 1,
                explanation: "Si ln(x) = 2, alors x = e¬≤ (d√©finition du logarithme naturel)"
            },
            {
                question: "Quelle est la valeur de ln(e¬≥) ?",
                options: ["3", "e¬≥", "3e", "e/3"],
                correct: 0,
                explanation: "ln(e¬≥) = 3 √ó ln(e) = 3 √ó 1 = 3"
            },
            {
                question: "Si ln(a) + ln(b) = ln(8), alors ab = ?",
                options: ["ln(8)", "8", "8ln", "e‚Å∏"],
                correct: 1,
                explanation: "ln(a) + ln(b) = ln(ab) = ln(8), donc ab = 8"
            },
            {
                question: "Quel est le domaine de d√©finition de ln(2x - 4) ?",
                options: ["x > 2", "x ‚â• 2", "x < 2", "x ‚àà ‚Ñù"],
                correct: 0,
                explanation: "Il faut 2x - 4 > 0, donc x > 2"
            },
            {
                question: "La d√©riv√©e de ln(x) est :",
                options: ["x", "1/x", "ln(x)", "e^x"],
                correct: 1,
                explanation: "La d√©riv√©e de ln(x) est 1/x pour x > 0"
            }
        ];

        function checkAnswer(button, isCorrect, answer) {
            const buttons = document.querySelectorAll('.answer-btn');
            buttons.forEach(btn => btn.style.pointerEvents = 'none');
            
            if (isCorrect) {
                button.classList.add('correct');
                awardPointsToActiveTeams(20);
                showNotification(`üéâ Bonne r√©ponse ! +20 points pour les √©quipes actives !`);
                updateProgress(lessonProgress + 8);
            } else {
                button.classList.add('incorrect');
                showNotification(`‚ùå R√©ponse incorrecte. La bonne r√©ponse sera r√©v√©l√©e !`);
                
                // Montrer la bonne r√©ponse
                setTimeout(() => {
                    buttons.forEach(btn => {
                        if (btn.onclick.toString().includes('true')) {
                            btn.classList.add('correct');
                        }
                    });
                }, 1000);
            }
            
            // Expliquer la r√©ponse
            setTimeout(() => {
                if (challenges[currentChallenge]) {
                    alert(`üí° Explication :\n${challenges[currentChallenge].explanation}`);
                }
            }, 2000);
        }

        function nextChallenge() {
            currentChallenge = (currentChallenge + 1) % challenges.length;
            const challenge = challenges[currentChallenge];
            
            document.getElementById('challengeQuestion').innerHTML = 
                `<strong>Question ${currentChallenge + 1}:</strong> ${challenge.question}`;
            
            const options = document.querySelectorAll('.answer-btn');
            options.forEach((btn, index) => {
                btn.textContent = `${String.fromCharCode(65 + index)}) ${challenge.options[index]}`;
                btn.className = 'answer-btn';
                btn.style.pointerEvents = 'auto';
                btn.onclick = () => checkAnswer(btn, index === challenge.correct);
            });
            
            showNotification(`üîÑ Nouvelle question ! Question ${currentChallenge + 1}`);
            updateProgress(lessonProgress + 5);
        }

        // Syst√®me de points et notifications
        function awardPointsToActiveTeams(points) {
            const activeTeams = teams.filter(team => team.active);
            if (activeTeams.length === 0) {
                showNotification('‚ö†Ô∏è Aucune √©quipe active ! Activez une √©quipe pour gagner des points.');
                return;
            }
            
            activeTeams.forEach(team => {
                team.score += points;
            });
            
            updateTeamsDisplay();
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            const text = document.getElementById('notificationText');
            
            text.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        function updateProgress(newProgress) {
            lessonProgress = Math.min(newProgress, 100);
            const progressCircle = document.getElementById('lessonProgress');
            const progressText = document.getElementById('progressText');
            
            const circumference = 2 * Math.PI * 42;
            const offset = circumference - (lessonProgress / 100) * circumference;
            
            progressCircle.style.strokeDashoffset = offset;
            progressText.textContent = Math.round(lessonProgress) + '%';
            
            if (lessonProgress >= 100) {
                showNotification('üéä F√©licitations ! Le√ßon termin√©e avec succ√®s !');
                // Effet de c√©l√©bration
                setTimeout(() => {
                    alert('üèÜ BRAVO √Ä TOUTE LA CLASSE !\n\nVous avez explor√© les fonctions logarithmiques de mani√®re collaborative.\n\nR√©capitulatif des acquis :\n‚Ä¢ D√©finition et propri√©t√©s\n‚Ä¢ Repr√©sentation graphique\n‚Ä¢ R√©solution d\'√©quations\n‚Ä¢ Applications pratiques\n\nContinuez ce bel esprit d\'√©quipe !');
                }, 1000);
            }
        }

        // Raccourcis clavier pour le professeur
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey) {
                switch(e.key) {
                    case '1':
                        e.preventDefault();
                        startActivity('definition');
                        break;
                    case '2':
                        e.preventDefault();
                        startActivity('properties');
                        break;
                    case '3':
                        e.preventDefault();
                        startActivity('graphs');
                        break;
                    case '4':
                        e.preventDefault();
                        startActivity('applications');
                        break;
                    case 'n':
                        e.preventDefault();
                        nextChallenge();
                        break;
                }
            }
        });

        // Entrer pour ajouter une √©quipe
        document.getElementById('teamNameInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                addTeam();
            }
        });

        // Message d'accueil avec instructions
        setTimeout(() => {
            alert(`üéì BIENVENUE DANS LA CLASSE INTERACTIVE !\n\nüìã Instructions :\n1. Cr√©ez vos √©quipes (max 8)\n2. Cliquez sur une √©quipe pour l'activer\n3. Participez aux activit√©s collaboratives\n4. R√©pondez aux d√©fis pour gagner des points\n\n‚å®Ô∏è Raccourcis professeur :\n‚Ä¢ Ctrl+1 √† 4 : Lancer les activit√©s\n‚Ä¢ Ctrl+N : Question suivante\n\nüéØ Objectif : Ma√Ætriser les fonctions logarithmiques ensemble !`);
        }, 2000);
    </script>
</body>
</html>
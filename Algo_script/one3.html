<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Les Fonctions Trigonom√©triques - Explorer le Cercle Unitaire</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 15px;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: 1.3em;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .objectives {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .objective-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .objective-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .interactive-panel {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            height: fit-content;
        }

        .canvas-container {
            position: relative;
            margin: 20px 0;
        }

        #unitCircle {
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            border-radius: 10px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            display: block;
            margin: 0 auto;
        }

        .controls {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 20px;
        }

        .slider-container {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .slider-container label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            font-size: 1.1em;
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.3);
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            cursor: pointer;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .values-display {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
        }

        .value-row {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
            font-size: 1.1em;
        }

        .function-graphs {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        #graphCanvas {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            display: block;
            margin: 0 auto;
        }

        .play-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            border: none;
            color: white;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .btn:active {
            transform: scale(0.95);
        }

        .quiz-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-top: 30px;
        }

        .quiz-question {
            font-size: 1.2em;
            margin-bottom: 20px;
            text-align: center;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .quiz-option {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .quiz-option:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .quiz-option.correct {
            background: rgba(76, 175, 80, 0.3);
            border-color: #4CAF50;
        }

        .quiz-option.incorrect {
            background: rgba(244, 67, 54, 0.3);
            border-color: #f44336;
        }

        .feedback {
            text-align: center;
            font-size: 1.1em;
            margin-top: 15px;
            padding: 15px;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.2);
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .objectives {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåü Les Fonctions Trigonom√©triques üåü</h1>
            <p class="subtitle">Explorez le monde fascinant des sinus, cosinus et tangentes</p>
            
            <div class="objectives">
                <div class="objective-card">
                    <h3>üéØ Objectif 1</h3>
                    <p>Comprendre le cercle unitaire et les coordonn√©es des points</p>
                </div>
                <div class="objective-card">
                    <h3>üìà Objectif 2</h3>
                    <p>Visualiser les graphiques des fonctions sin(x), cos(x) et tan(x)</p>
                </div>
                <div class="objective-card">
                    <h3>üîó Objectif 3</h3>
                    <p>√âtablir le lien entre le cercle unitaire et les courbes</p>
                </div>
                <div class="objective-card">
                    <h3>üßÆ Objectif 4</h3>
                    <p>Ma√Ætriser les valeurs remarquables et leurs applications</p>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="interactive-panel">
                <h2>üéÆ Cercle Unitaire Interactif</h2>
                <div class="canvas-container">
                    <canvas id="unitCircle" width="400" height="400"></canvas>
                </div>
                
                <div class="controls">
                    <div class="slider-container">
                        <label for="angleSlider">Angle Œ∏ (radians): <span id="angleValue">0</span></label>
                        <input type="range" id="angleSlider" min="0" max="6.28" step="0.01" value="0">
                    </div>
                    
                    <div class="play-controls">
                        <button class="btn" id="playBtn">‚ñ∂Ô∏è Animation</button>
                        <button class="btn" id="resetBtn">üîÑ Reset</button>
                    </div>
                </div>

                <div class="values-display">
                    <div class="value-row">
                        <span>cos(Œ∏) =</span>
                        <span id="cosValue">1.000</span>
                    </div>
                    <div class="value-row">
                        <span>sin(Œ∏) =</span>
                        <span id="sinValue">0.000</span>
                    </div>
                    <div class="value-row">
                        <span>tan(Œ∏) =</span>
                        <span id="tanValue">0.000</span>
                    </div>
                    <div class="value-row">
                        <span>Œ∏ (degr√©s) =</span>
                        <span id="degreeValue">0¬∞</span>
                    </div>
                </div>
            </div>

            <div class="function-graphs">
                <h2>üìä Graphiques des Fonctions</h2>
                <canvas id="graphCanvas" width="500" height="400"></canvas>
                <div style="text-align: center; margin-top: 15px;">
                    <span style="color: #FF6B6B;">‚ñ† sin(x)</span>
                    <span style="color: #4ECDC4; margin-left: 20px;">‚ñ† cos(x)</span>
                    <span style="color: #FFE66D; margin-left: 20px;">‚ñ† tan(x)</span>
                </div>
            </div>
        </div>

        <div class="quiz-section">
            <h2>üß© Quiz Interactif</h2>
            <div class="quiz-question" id="quizQuestion">
                Quelle est la valeur de cos(œÄ/3) ?
            </div>
            <div class="quiz-options" id="quizOptions">
                <div class="quiz-option" data-answer="incorrect">‚àö3/2</div>
                <div class="quiz-option" data-answer="correct">1/2</div>
                <div class="quiz-option" data-answer="incorrect">‚àö2/2</div>
                <div class="quiz-option" data-answer="incorrect">1</div>
            </div>
            <div class="feedback" id="feedback" style="display: none;"></div>
        </div>
    </div>

    <script>
        class TrigonometryVisualizer {
            constructor() {
                this.canvas = document.getElementById('unitCircle');
                this.ctx = this.canvas.getContext('2d');
                this.graphCanvas = document.getElementById('graphCanvas');
                this.graphCtx = this.graphCanvas.getContext('2d');
                
                this.angleSlider = document.getElementById('angleSlider');
                this.playBtn = document.getElementById('playBtn');
                this.resetBtn = document.getElementById('resetBtn');
                
                this.angle = 0;
                this.isPlaying = false;
                this.animationId = null;
                this.graphData = [];
                
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.drawUnitCircle();
                this.drawGraphs();
                this.updateValues();
            }

            setupEventListeners() {
                this.angleSlider.addEventListener('input', (e) => {
                    this.angle = parseFloat(e.target.value);
                    this.updateVisualization();
                });

                this.playBtn.addEventListener('click', () => {
                    this.toggleAnimation();
                });

                this.resetBtn.addEventListener('click', () => {
                    this.reset();
                });
            }

            drawUnitCircle() {
                const centerX = this.canvas.width / 2;
                const centerY = this.canvas.height / 2;
                const radius = 150;

                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);

                // Gradient background
                const gradient = this.ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, radius);
                gradient.addColorStop(0, 'rgba(255,255,255,0.1)');
                gradient.addColorStop(1, 'rgba(255,255,255,0.05)');
                this.ctx.fillStyle = gradient;
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);

                // Grid lines
                this.ctx.strokeStyle = 'rgba(255,255,255,0.3)';
                this.ctx.lineWidth = 1;
                this.ctx.setLineDash([5, 5]);
                
                // Vertical and horizontal axes
                this.ctx.beginPath();
                this.ctx.moveTo(0, centerY);
                this.ctx.lineTo(this.canvas.width, centerY);
                this.ctx.moveTo(centerX, 0);
                this.ctx.lineTo(centerX, this.canvas.height);
                this.ctx.stroke();

                // Unit circle
                this.ctx.setLineDash([]);
                this.ctx.beginPath();
                this.ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
                this.ctx.strokeStyle = 'rgba(255,255,255,0.8)';
                this.ctx.lineWidth = 3;
                this.ctx.stroke();

                // Angle arc
                if (this.angle > 0) {
                    this.ctx.beginPath();
                    this.ctx.arc(centerX, centerY, 30, 0, this.angle);
                    this.ctx.strokeStyle = '#FFD700';
                    this.ctx.lineWidth = 3;
                    this.ctx.stroke();
                }

                // Point on circle
                const x = centerX + radius * Math.cos(this.angle);
                const y = centerY - radius * Math.sin(this.angle);

                // Radius line
                this.ctx.beginPath();
                this.ctx.moveTo(centerX, centerY);
                this.ctx.lineTo(x, y);
                this.ctx.strokeStyle = '#FF6B6B';
                this.ctx.lineWidth = 3;
                this.ctx.stroke();

                // Projections
                this.ctx.setLineDash([3, 3]);
                this.ctx.strokeStyle = '#4ECDC4';
                this.ctx.lineWidth = 2;
                
                // Vertical projection (cosinus)
                this.ctx.beginPath();
                this.ctx.moveTo(x, y);
                this.ctx.lineTo(x, centerY);
                this.ctx.stroke();

                // Horizontal projection (sinus)
                this.ctx.beginPath();
                this.ctx.moveTo(x, y);
                this.ctx.lineTo(centerX, y);
                this.ctx.stroke();

                this.ctx.setLineDash([]);

                // Point on circle
                this.ctx.beginPath();
                this.ctx.arc(x, y, 8, 0, 2 * Math.PI);
                this.ctx.fillStyle = '#FFD700';
                this.ctx.fill();
                this.ctx.strokeStyle = '#FFA500';
                this.ctx.lineWidth = 2;
                this.ctx.stroke();

                // Labels
                this.ctx.fillStyle = 'white';
                this.ctx.font = 'bold 14px Arial';
                this.ctx.textAlign = 'center';
                
                const cosX = x;
                const sinY = y;
                
                this.ctx.fillText('cos(Œ∏)', cosX, centerY + 20);
                this.ctx.fillText('sin(Œ∏)', centerX - 25, sinY);
            }

            drawGraphs() {
                const width = this.graphCanvas.width;
                const height = this.graphCanvas.height;
                const centerY = height / 2;
                
                this.graphCtx.clearRect(0, 0, width, height);

                // Background
                const gradient = this.graphCtx.createLinearGradient(0, 0, 0, height);
                gradient.addColorStop(0, 'rgba(0,0,0,0.3)');
                gradient.addColorStop(1, 'rgba(0,0,0,0.1)');
                this.graphCtx.fillStyle = gradient;
                this.graphCtx.fillRect(0, 0, width, height);

                // Grid
                this.graphCtx.strokeStyle = 'rgba(255,255,255,0.2)';
                this.graphCtx.lineWidth = 1;
                this.graphCtx.setLineDash([2, 2]);
                
                // Horizontal grid lines
                for (let i = 0; i <= 4; i++) {
                    const y = (i * height) / 4;
                    this.graphCtx.beginPath();
                    this.graphCtx.moveTo(0, y);
                    this.graphCtx.lineTo(width, y);
                    this.graphCtx.stroke();
                }

                // Vertical grid lines
                for (let i = 0; i <= 8; i++) {
                    const x = (i * width) / 8;
                    this.graphCtx.beginPath();
                    this.graphCtx.moveTo(x, 0);
                    this.graphCtx.lineTo(x, height);
                    this.graphCtx.stroke();
                }

                this.graphCtx.setLineDash([]);

                // Axes
                this.graphCtx.strokeStyle = 'rgba(255,255,255,0.8)';
                this.graphCtx.lineWidth = 2;
                this.graphCtx.beginPath();
                this.graphCtx.moveTo(0, centerY);
                this.graphCtx.lineTo(width, centerY);
                this.graphCtx.stroke();

                // Draw functions
                const scale = 100;
                const xScale = width / (4 * Math.PI);

                // Sin function
                this.graphCtx.strokeStyle = '#FF6B6B';
                this.graphCtx.lineWidth = 3;
                this.graphCtx.beginPath();
                for (let x = 0; x < width; x++) {
                    const angle = (x / xScale);
                    const y = centerY - Math.sin(angle) * scale;
                    if (x === 0) {
                        this.graphCtx.moveTo(x, y);
                    } else {
                        this.graphCtx.lineTo(x, y);
                    }
                }
                this.graphCtx.stroke();

                // Cos function
                this.graphCtx.strokeStyle = '#4ECDC4';
                this.graphCtx.lineWidth = 3;
                this.graphCtx.beginPath();
                for (let x = 0; x < width; x++) {
                    const angle = (x / xScale);
                    const y = centerY - Math.cos(angle) * scale;
                    if (x === 0) {
                        this.graphCtx.moveTo(x, y);
                    } else {
                        this.graphCtx.lineTo(x, y);
                    }
                }
                this.graphCtx.stroke();

                // Tan function (with limits)
                this.graphCtx.strokeStyle = '#FFE66D';
                this.graphCtx.lineWidth = 2;
                this.graphCtx.beginPath();
                let prevY = null;
                for (let x = 0; x < width; x++) {
                    const angle = (x / xScale);
                    const tanValue = Math.tan(angle);
                    const y = centerY - tanValue * 30;
                    
                    if (Math.abs(tanValue) < 10 && y > -50 && y < height + 50) {
                        if (prevY !== null && Math.abs(y - prevY) < 100) {
                            this.graphCtx.lineTo(x, y);
                        } else {
                            this.graphCtx.moveTo(x, y);
                        }
                        prevY = y;
                    } else {
                        prevY = null;
                    }
                }
                this.graphCtx.stroke();

                // Current angle indicator
                const currentX = this.angle * xScale;
                if (currentX >= 0 && currentX <= width) {
                    this.graphCtx.strokeStyle = '#FFD700';
                    this.graphCtx.lineWidth = 3;
                    this.graphCtx.setLineDash([5, 5]);
                    this.graphCtx.beginPath();
                    this.graphCtx.moveTo(currentX, 0);
                    this.graphCtx.lineTo(currentX, height);
                    this.graphCtx.stroke();
                    this.graphCtx.setLineDash([]);

                    // Points on curves
                    const sinY = centerY - Math.sin(this.angle) * scale;
                    const cosY = centerY - Math.cos(this.angle) * scale;
                    
                    // Sin point
                    this.graphCtx.fillStyle = '#FF6B6B';
                    this.graphCtx.beginPath();
                    this.graphCtx.arc(currentX, sinY, 6, 0, 2 * Math.PI);
                    this.graphCtx.fill();

                    // Cos point
                    this.graphCtx.fillStyle = '#4ECDC4';
                    this.graphCtx.beginPath();
                    this.graphCtx.arc(currentX, cosY, 6, 0, 2 * Math.PI);
                    this.graphCtx.fill();
                }
            }

            updateValues() {
                const cos = Math.cos(this.angle);
                const sin = Math.sin(this.angle);
                const tan = Math.tan(this.angle);
                const degrees = (this.angle * 180 / Math.PI) % 360;

                document.getElementById('angleValue').textContent = this.angle.toFixed(3);
                document.getElementById('cosValue').textContent = cos.toFixed(3);
                document.getElementById('sinValue').textContent = sin.toFixed(3);
                document.getElementById('tanValue').textContent = Math.abs(tan) > 1000 ? '‚àû' : tan.toFixed(3);
                document.getElementById('degreeValue').textContent = degrees.toFixed(1) + '¬∞';
            }

            updateVisualization() {
                this.angleSlider.value = this.angle;
                this.drawUnitCircle();
                this.drawGraphs();
                this.updateValues();
            }

            toggleAnimation() {
                if (this.isPlaying) {
                    this.stopAnimation();
                } else {
                    this.startAnimation();
                }
            }

            startAnimation() {
                this.isPlaying = true;
                this.playBtn.textContent = '‚è∏Ô∏è Pause';
                this.animate();
            }

            stopAnimation() {
                this.isPlaying = false;
                this.playBtn.textContent = '‚ñ∂Ô∏è Animation';
                if (this.animationId) {
                    cancelAnimationFrame(this.animationId);
                }
            }

            animate() {
                if (!this.isPlaying) return;

                this.angle += 0.02;
                if (this.angle > 2 * Math.PI) {
                    this.angle = 0;
                }

                this.updateVisualization();
                this.animationId = requestAnimationFrame(() => this.animate());
            }

            reset() {
                this.stopAnimation();
                this.angle = 0;
                this.updateVisualization();
            }
        }

        // Quiz functionality
        class TrigQuiz {
            constructor() {
                this.questions = [
                    {
                        question: "Quelle est la valeur de cos(œÄ/3) ?",
                        options: ["‚àö3/2", "1/2", "‚àö2/2", "1"],
                        correct: 1,
                        explanation: "cos(œÄ/3) = cos(60¬∞) = 1/2"
                    },
                    {
                        question: "Quelle est la valeur de sin(œÄ/2) ?",
                        options: ["0", "1/2", "‚àö2/2", "1"],
                        correct: 3,
                        explanation: "sin(œÄ/2) = sin(90¬∞) = 1"
                    },
                    {
                        question: "√Ä quel angle tan(Œ∏) = 1 ?",
                        options: ["œÄ/6", "œÄ/4", "œÄ/3", "œÄ/2"],
                        correct: 1,
                        explanation: "tan(œÄ/4) = tan(45¬∞) = 1"
                    },
                    {
                        question: "Quelle est la p√©riode de sin(x) ?",
                        options: ["œÄ", "2œÄ", "œÄ/2", "4œÄ"],
                        correct: 1,
                        explanation: "La fonction sinus a une p√©riode de 2œÄ"
                    }
                ];
                
                this.currentQuestion = 0;
                this.init();
            }

            init() {
                this.showQuestion();
                this.setupQuizListeners();
            }

            showQuestion() {
                const question = this.questions[this.currentQuestion];
                document.getElementById('quizQuestion').textContent = question.question;
                
                const optionsContainer = document.getElementById('quizOptions');
                optionsContainer.innerHTML = '';
                
                question.options.forEach((option, index) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'quiz-option';
                    optionElement.textContent = option;
                    optionElement.dataset.index = index;
                    optionsContainer.appendChild(optionElement);
                });

                document.getElementById('feedback').style.display = 'none';
            }

            setupQuizListeners() {
                document.getElementById('quizOptions').addEventListener('click', (e) => {
                    if (e.target.classList.contains('quiz-option')) {
                        this.checkAnswer(parseInt(e.target.dataset.index));
                    }
                });
            }

            checkAnswer(selectedIndex) {
                const question = this.questions[this.currentQuestion];
                const options = document.querySelectorAll('.quiz-option');
                const feedback = document.getElementById('feedback');

                // Reset all options
                options.forEach(option => {
                    option.classList.remove('correct', 'incorrect');
                });

                if (selectedIndex === question.correct) {
                    options[selectedIndex].classList.add('correct');
                    feedback.textContent = 'üéâ Correct ! ' + question.explanation;
                    feedback.style.background = 'rgba(76, 175, 80, 0.3)';
                } else {
                    options[selectedIndex].classList.add('incorrect');
                    options[question.correct].classList.add('correct');
                    feedback.textContent = '‚ùå Incorrect. ' + question.explanation;
                    feedback.style.background = 'rgba(244, 67, 54, 0.3)';
                }

                feedback.style.display = 'block';

                // Next question after delay
                setTimeout(() => {
                    this.currentQuestion = (this.currentQuestion + 1) % this.questions.length;
                    this.showQuestion();
                }, 3000);
            }
        }

            // Special values indicators
            this.addSpecialValues();
        }

        addSpecialValues() {
            const centerX = this.canvas.width / 2;
            const centerY = this.canvas.height / 2;
            const radius = 150;
            
            const specialAngles = [
                { angle: 0, label: '0', color: '#FFD700' },
                { angle: Math.PI/6, label: 'œÄ/6', color: '#FF6B6B' },
                { angle: Math.PI/4, label: 'œÄ/4', color: '#4ECDC4' },
                { angle: Math.PI/3, label: 'œÄ/3', color: '#95E1D3' },
                { angle: Math.PI/2, label: 'œÄ/2', color: '#A8E6CF' },
                { angle: 2*Math.PI/3, label: '2œÄ/3', color: '#FFAAA5' },
                { angle: 3*Math.PI/4, label: '3œÄ/4', color: '#FF8B94' },
                { angle: 5*Math.PI/6, label: '5œÄ/6', color: '#B4A7D6' },
                { angle: Math.PI, label: 'œÄ', color: '#D4A5A5' }
            ];

            this.ctx.font = 'bold 12px Arial';
            this.ctx.textAlign = 'center';
            
            specialAngles.forEach(({ angle, label, color }) => {
                const x = centerX + (radius + 25) * Math.cos(angle);
                const y = centerY - (radius + 25) * Math.sin(angle);
                
                // Highlight if close to current angle
                const angleDiff = Math.abs(angle - this.angle);
                const isClose = angleDiff < 0.1 || Math.abs(angleDiff - 2*Math.PI) < 0.1;
                
                if (isClose) {
                    this.ctx.fillStyle = color;
                    this.ctx.beginPath();
                    this.ctx.arc(x, y, 15, 0, 2 * Math.PI);
                    this.ctx.fill();
                    this.ctx.fillStyle = 'black';
                    this.ctx.fillText(label, x, y + 4);
                } else {
                    this.ctx.fillStyle = 'rgba(255,255,255,0.7)';
                    this.ctx.fillText(label, x, y + 4);
                }
            });
        }

        // Add method to show formula explanations
        showFormulas() {
            const formulaDiv = document.createElement('div');
            formulaDiv.className = 'formula-display';
            formulaDiv.innerHTML = `
                <h3>üßÆ Formules Essentielles</h3>
                <div class="formula-grid">
                    <div class="formula-card">
                        <h4>Identit√© Fondamentale</h4>
                        <p>sin¬≤(Œ∏) + cos¬≤(Œ∏) = 1</p>
                    </div>
                    <div class="formula-card">
                        <h4>D√©finition Tangente</h4>
                        <p>tan(Œ∏) = sin(Œ∏) / cos(Œ∏)</p>
                    </div>
                    <div class="formula-card">
                        <h4>Angles Compl√©mentaires</h4>
                        <p>sin(œÄ/2 - Œ∏) = cos(Œ∏)</p>
                    </div>
                    <div class="formula-card">
                        <h4>Parit√©</h4>
                        <p>sin(-Œ∏) = -sin(Œ∏)<br>cos(-Œ∏) = cos(Œ∏)</p>
                    </div>
                </div>
            `;
            return formulaDiv;
        }
    }

    // Enhanced Quiz with more interactive features
    class TrigQuiz {
        constructor() {
            this.questions = [
                {
                    question: "Quelle est la valeur de cos(œÄ/3) ?",
                    options: ["‚àö3/2", "1/2", "‚àö2/2", "1"],
                    correct: 1,
                    explanation: "cos(œÄ/3) = cos(60¬∞) = 1/2. C'est une valeur remarquable du triangle √©quilat√©ral."
                },
                {
                    question: "Quelle est la valeur de sin(œÄ/2) ?",
                    options: ["0", "1/2", "‚àö2/2", "1"],
                    correct: 3,
                    explanation: "sin(œÄ/2) = sin(90¬∞) = 1. Au sommet du cercle unitaire, la coordonn√©e y est maximale."
                },
                {
                    question: "√Ä quel angle tan(Œ∏) = 1 ?",
                    options: ["œÄ/6", "œÄ/4", "œÄ/3", "œÄ/2"],
                    correct: 1,
                    explanation: "tan(œÄ/4) = tan(45¬∞) = 1. C'est l'angle o√π sin(Œ∏) = cos(Œ∏)."
                },
                {
                    question: "Quelle est la p√©riode de sin(x) ?",
                    options: ["œÄ", "2œÄ", "œÄ/2", "4œÄ"],
                    correct: 1,
                    explanation: "La fonction sinus a une p√©riode de 2œÄ, soit 360¬∞."
                },
                {
                    question: "Que vaut sin¬≤(Œ∏) + cos¬≤(Œ∏) ?",
                    options: ["0", "1", "2", "Œ∏"],
                    correct: 1,
                    explanation: "C'est l'identit√© trigonom√©trique fondamentale : sin¬≤(Œ∏) + cos¬≤(Œ∏) = 1."
                },
                {
                    question: "Quelle est la valeur de cos(0) ?",
                    options: ["0", "1", "-1", "1/2"],
                    correct: 1,
                    explanation: "cos(0) = 1. √Ä l'angle 0, on est √† droite du cercle unitaire o√π x = 1."
                }
            ];
            
            this.currentQuestion = 0;
            this.score = 0;
            this.totalQuestions = this.questions.length;
            this.init();
        }

        init() {
            this.addScoreDisplay();
            this.showQuestion();
            this.setupQuizListeners();
        }

        addScoreDisplay() {
            const scoreDiv = document.createElement('div');
            scoreDiv.className = 'score-display';
            scoreDiv.innerHTML = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <h3>üèÜ Score: <span id="currentScore">0</span>/${this.totalQuestions}</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>
            `;
            
            const quizSection = document.querySelector('.quiz-section');
            quizSection.insertBefore(scoreDiv, quizSection.firstChild);
        }

        showQuestion() {
            const question = this.questions[this.currentQuestion];
            document.getElementById('quizQuestion').textContent = 
                `Question ${this.currentQuestion + 1}/${this.totalQuestions}: ${question.question}`;
            
            const optionsContainer = document.getElementById('quizOptions');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'quiz-option';
                optionElement.innerHTML = `<span>${String.fromCharCode(65 + index)})</span> ${option}`;
                optionElement.dataset.index = index;
                optionsContainer.appendChild(optionElement);
            });

            document.getElementById('feedback').style.display = 'none';
            this.updateProgress();
        }

        updateProgress() {
            const progress = (this.currentQuestion / this.totalQuestions) * 100;
            const progressFill = document.getElementById('progressFill');
            if (progressFill) {
                progressFill.style.width = progress + '%';
            }
        }

        checkAnswer(selectedIndex) {
            const question = this.questions[this.currentQuestion];
            const options = document.querySelectorAll('.quiz-option');
            const feedback = document.getElementById('feedback');

            // Disable all options
            options.forEach(option => {
                option.style.pointerEvents = 'none';
                option.classList.remove('correct', 'incorrect');
            });

            if (selectedIndex === question.correct) {
                options[selectedIndex].classList.add('correct');
                feedback.innerHTML = 'üéâ <strong>Excellent !</strong><br>' + question.explanation;
                feedback.style.background = 'rgba(76, 175, 80, 0.3)';
                this.score++;
                
                // Particle effect for correct answer
                this.createParticleEffect(options[selectedIndex]);
            } else {
                options[selectedIndex].classList.add('incorrect');
                options[question.correct].classList.add('correct');
                feedback.innerHTML = '‚ùå <strong>Pas tout √† fait...</strong><br>' + question.explanation;
                feedback.style.background = 'rgba(244, 67, 54, 0.3)';
            }

            // Update score display
            document.getElementById('currentScore').textContent = this.score;
            feedback.style.display = 'block';

            // Next question or finish
            setTimeout(() => {
                if (this.currentQuestion < this.totalQuestions - 1) {
                    this.currentQuestion++;
                    this.showQuestion();
                    options.forEach(option => {
                        option.style.pointerEvents = 'auto';
                    });
                } else {
                    this.showFinalScore();
                }
            }, 3000);
        }

        createParticleEffect(element) {
            const rect = element.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;

            for (let i = 0; i < 10; i++) {
                const particle = document.createElement('div');
                particle.innerHTML = '‚ú®';
                particle.style.position = 'fixed';
                particle.style.left = centerX + 'px';
                particle.style.top = centerY + 'px';
                particle.style.pointerEvents = 'none';
                particle.style.zIndex = '1000';
                particle.style.fontSize = '20px';
                document.body.appendChild(particle);

                const angle = (i / 10) * 2 * Math.PI;
                const distance = 50 + Math.random() * 50;
                const duration = 1000 + Math.random() * 500;

                particle.animate([
                    { transform: 'translate(0, 0) scale(1)', opacity: 1 },
                    { 
                        transform: `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px) scale(0)`, 
                        opacity: 0 
                    }
                ], {
                    duration: duration,
                    easing: 'ease-out'
                }).onfinish = () => particle.remove();
            }
        }

        showFinalScore() {
            const percentage = Math.round((this.score / this.totalQuestions) * 100);
            let message = '';
            let emoji = '';

            if (percentage >= 90) {
                message = 'Parfait ! Vous ma√Ætrisez parfaitement les fonctions trigonom√©triques !';
                emoji = 'üèÜ';
            } else if (percentage >= 70) {
                message = 'Tr√®s bien ! Vous avez une bonne compr√©hension du sujet.';
                emoji = 'üéâ';
            } else if (percentage >= 50) {
                message = 'Pas mal ! Continuez √† pratiquer pour am√©liorer vos r√©sultats.';
                emoji = 'üëç';
            } else {
                message = 'Il faut r√©viser ! Reprenez les concepts de base.';
                emoji = 'üìö';
            }

            const feedback = document.getElementById('feedback');
            feedback.innerHTML = `
                <div style="text-align: center; font-size: 1.3em;">
                    ${emoji}<br>
                    <strong>Score final: ${this.score}/${this.totalQuestions} (${percentage}%)</strong><br>
                    ${message}<br>
                    <button class="btn" onclick="location.reload()" style="margin-top: 15px;">
                        üîÑ Recommencer
                    </button>
                </div>
            `;
            feedback.style.display = 'block';
            feedback.style.background = 'rgba(255, 215, 0, 0.2)';
        }

        setupQuizListeners() {
            document.getElementById('quizOptions').addEventListener('click', (e) => {
                if (e.target.closest('.quiz-option')) {
                    const option = e.target.closest('.quiz-option');
                    this.checkAnswer(parseInt(option.dataset.index));
                }
            });
        }
    }

    // Add CSS for new features
    const additionalCSS = `
        <style>
            .formula-display {
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
                border-radius: 20px;
                padding: 30px;
                border: 1px solid rgba(255, 255, 255, 0.2);
                margin-top: 30px;
            }

            .formula-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 20px;
                margin-top: 20px;
            }

            .formula-card {
                background: rgba(255, 255, 255, 0.1);
                border-radius: 15px;
                padding: 20px;
                border: 1px solid rgba(255, 255, 255, 0.2);
                text-align: center;
                transition: all 0.3s ease;
            }

            .formula-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            }

            .formula-card h4 {
                color: #FFD700;
                margin-bottom: 10px;
            }

            .score-display {
                text-align: center;
                margin-bottom: 30px;
            }

            .progress-bar {
                width: 100%;
                height: 10px;
                background: rgba(255, 255, 255, 0.2);
                border-radius: 5px;
                overflow: hidden;
                margin-top: 10px;
            }

            .progress-fill {
                height: 100%;
                background: linear-gradient(90deg, #FFD700, #FFA500);
                width: 0%;
                transition: width 0.5s ease;
                border-radius: 5px;
            }

            .quiz-option span {
                font-weight: bold;
                margin-right: 10px;
                color: #FFD700;
            }

            @keyframes celebration {
                0% { transform: scale(1) rotate(0deg); }
                25% { transform: scale(1.1) rotate(5deg); }
                50% { transform: scale(1.2) rotate(-5deg); }
                75% { transform: scale(1.1) rotate(3deg); }
                100% { transform: scale(1) rotate(0deg); }
            }

            .quiz-option.correct {
                animation: celebration 0.6s ease;
            }
        </style>
    `;

    // Initialize everything
    document.addEventListener('DOMContentLoaded', () => {
        // Add additional CSS
        document.head.insertAdjacentHTML('beforeend', additionalCSS);
        
        const visualizer = new TrigonometryVisualizer();
        const quiz = new TrigQuiz();
        
        // Add formula section
        const formulaSection = visualizer.showFormulas();
        formulaSection.style.cssText = `
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-top: 30px;
        `;
        
        const container = document.querySelector('.container');
        container.appendChild(formulaSection);
        
        // Add educational tips
        const tipsSection = document.createElement('div');
        tipsSection.className = 'tips-section';
        tipsSection.innerHTML = `
            <h2>üí° Conseils pour R√©ussir</h2>
            <div class="tips-grid">
                <div class="tip-card">
                    <h3>üéØ M√©morisation</h3>
                    <p>Utilisez les triangles remarquables (30-60-90¬∞ et 45-45-90¬∞) pour retenir les valeurs importantes.</p>
                </div>
                <div class="tip-card">
                    <h3>üîÑ Pratique</h3>
                    <p>Manipulez l'animation pour voir comment les valeurs √©voluent autour du cercle.</p>
                </div>
                <div class="tip-card">
                    <h3>üìä Visualisation</h3>
                    <p>Observez le lien entre la position sur le cercle et les courbes des fonctions.</p>
                </div>
                <div class="tip-card">
                    <h3>üßÆ Applications</h3>
                    <p>Les fonctions trigonom√©triques mod√©lisent les ph√©nom√®nes p√©riodiques : ondes, oscillations, etc.</p>
                </div>
            </div>
        `;
        
        tipsSection.style.cssText = `
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-top: 30px;
        `;
        
        container.appendChild(tipsSection);
    });

    // Add CSS for tips section
    document.head.insertAdjacentHTML('beforeend', `
        <style>
            .tips-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 20px;
                margin-top: 20px;
            }

            .tip-card {
                background: rgba(255, 255, 255, 0.1);
                border-radius: 15px;
                padding: 20px;
                border: 1px solid rgba(255, 255, 255, 0.2);
                transition: all 0.3s ease;
            }

            .tip-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 25px rgba(0,0,0,0.2);
                background: rgba(255, 255, 255, 0.15);
            }

            .tip-card h3 {
                color: #FFD700;
                margin-bottom: 10px;
                font-size: 1.2em;
            }

            .tip-card p {
                line-height: 1.6;
                opacity: 0.9;
            }
        </style>
    `);
